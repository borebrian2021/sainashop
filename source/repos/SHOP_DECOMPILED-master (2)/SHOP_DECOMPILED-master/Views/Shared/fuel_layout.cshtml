@using Microsoft.AspNetCore.Http;
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Fuela &nbsp;|&nbsp;@ViewData["Title"]</title>


    <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    @*<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">*@
    <link href="~/css/cards.css" rel="stylesheet" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
    <link href="~/font-awesome-4.7.0/font-awesome-4.7.0/css/font-awesome.css" rel="stylesheet" />
    <link href="~/css/side_nav.css" rel="stylesheet" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <link href="~/css/tank.css" asp-append-version="true" rel="stylesheet" />
    <script src="https://kit.fontawesome.com/41cd8e780b.js" crossorigin="anonymous"></script>
    <link href="~/css/slider.css" rel="stylesheet" asp-append-version="true" />
</head>
<body class="bg-white">
    <header>
        <nav class="navbar navbar-expand-sm navbar-toggleable-sm navbar-light bg-white fixed-top">
            <div class="container">

                @if (User.Identity.IsAuthenticated && User.Identity.Name == "1")
                {
    <a class="navbar-brand title" asp-controller="Home" asp-action="Admin">
        <img src="~/images/fuel_logo.png" class="logoClassic" />

        Fuel Management System
    </a> }
else if (User.Identity.IsAuthenticated && User.Identity.Name == "2")
{
<a class="navbar-brand title" asp-controller="Home" asp-action="attendant">
    <img src="~/images/sell.png" class="logoClassic" />

    HOME
</a> }
else
{
<a class="navbar-brand title" asp-controller="log_in" asp-action="log_in">
    <img src="~/images/fuel_logo.png" class="logoClassic" />

    FUEL MANAGEMENT SYSTEM
</a>}

                @if (User.Identity.IsAuthenticated)
                {
    @*<a class="btn m-2" data-target="#receipt_mod" data-toggle="modal"><img class="sell-sm" src="~/images/settings.png" /></a>*@}

                @if (User.Identity.IsAuthenticated)
                {
    }
else
{
<div class="navbar-collapse collapse d-sm-inline-flex flex-sm-row-reverse">
    <ul class="navbar-nav flex-grow-1">

        <li class="nav-item">
            <a class="nav-link text-dark">@TempData["Current_page"]</a>
        </li>
    </ul>
</div>}

            </div>
        </nav>
    </header>


    @*<div class="top_bar_child_1 fixed-top w3-card-top text-center  bg-danger ">
            @if (User.Identity.IsAuthenticated)
            {
                <div class="row">
                    <div class="col-lg-6 col-6 text-left">
                        <a class="navbar-brand title w3-card m-3 ml-5 text-dark p-2" asp-action="Debtors" style="border-radius:100px;padding:5px;" asp-controller="home"><img src="~/icons/finance.png" class="power" />&nbsp;Creditors</a>

                    </div>
                    <div class="col-lg-6 col-6 text-right">
                        <a class="navbar-brand title w3-card m-3 mr-5 text-dark p-2" asp-controller="home" style="border-radius:100px;padding:5px;" asp-action="log_out">Log out&nbsp;<img src="~/icons/power.png" class="power" /></a>

                    </div>
                </div>
            }
        </div>*@
<div class="container-fluid menu_bar">
    @if (User.Identity.IsAuthenticated)
    {
<div class="row">
    <div class="col-6 col-lg-6 text-left">
        <p><img class="sell" id="show" onclick="openNav();" src="~/images/menu (4).png" alt="card image"></p>
        <p><img class="sell" id="hide" hidden onclick="closeNav();" src="~/images/menu (4).png" alt="card image"></p>

    </div>
    <div class="col-6 col-lg-6 text-right">
        <p><img class="sell" src="~/images/settings.png" alt="card image"></p>


    </div>
</div>}
            </div>

    <div class="container-fluid bring_to_front ">
        @if (User.Identity.IsAuthenticated)
        {
            <div id="mySidenav" class="sidenav" style="width:0px;">


                <div class="card-header">
                    <div style="text-align:right">

                        @*  <img src="~/Image_assets/close.png" onclick="closeNav()" style="height:10px" />*@
                    </div>
                    <div style="text-align:center"> Menu</div>
                </div>


                <div class="children">
                    <div class="line"></div>
                                       @if (User.Identity.Name == "1")

                    {
                        <div class="row   text-left">

                            <a href="index">
                                <div class="children text-left text-uppercase">

                                    <i class="fa fa-tint" aria-hidden="true"></i>&nbsp;&nbsp; SYSTEM USERS
                                </div>

                            </a>

                            <div class="line"></div>

                        </div>

                        <div class="row   text-left">

                            <a asp-action="index" asp-controller="fuel_category" asp-route-station_id="@ViewBag.station_id">
                                <div class="children text-left text-uppercase">

                                    <i class="fa fa-tachometer" aria-hidden="true"></i>&nbsp;&nbsp;MODIFY METER READINSY
                                </div>

                            </a>

                            <div class="line"></div>

                        </div>

                    }
                    @if (User.Identity.Name == "1")
            {
    <div class="row   text-left">

        <a asp-action="Admin" asp-controller="System_users" asp-route-station_id="@Context.Session.GetString("station_id")">
            <div class="children text-left text-uppercase">

                <i class="fa fa-home"></i>&nbsp;&nbsp; HOME
            </div>

        </a>

        <div class="line"></div>

    </div> }
            else
            {

    <div class="row   text-left">

        <a asp-action="Attendant" asp-controller="System_users" asp-route-station_id="@Context.Session.GetString("station_id")">
            <div class="children text-left text-uppercase">

                <i class="fa fa-home"></i>&nbsp;&nbsp; HOME
            </div>

        </a>

        <div class="line"></div>

    </div>}
            <div class="row   text-left">

                <a  onclick="refill_tanks()">
                    <div class="children text-left text-uppercase">

                        <i class="fa fa-tint" aria-hidden="true"></i>&nbsp;&nbsp; REFILL TANK
                    </div>

                </a>

                <div class="line"></div>

            </div>


            <div class="row  text-left">

                <a id="_change_price">
                    <div class="children text-left text-uppercase">

                        <i class="fa fa-pencil-square-o" aria-hidden="true"></i>&nbsp;&nbsp; CHANGE PRICE
                    </div>

                </a>

                <div class="line"></div>

            </div>
            <div class="row   text-left">
                <a asp-action="index" asp-controller="Individual_fuel_Sales_history" asp-route-station_id="@ViewBag.station_id">

                    <div class="children text-left text-uppercase">

                        <i class="fa fa-money" aria-hidden="true"></i>&nbsp;&nbsp; FUEL SALES
                    </div>

                </a>

                <div class="line"></div>

            </div> <div class="row   text-left">

                <a asp-action="Details" asp-controller="System_users" asp-route-id="@Context.Session.GetString("id")">
                    <div class="children text-left text-uppercase">

                        <i class="fa fa-user-circle" aria-hidden="true"></i>&nbsp;&nbsp;ACCOUNT SETTINGS
                    </div>

                </a>

                <div class="line"></div>

            </div>
            @{
                        @if (User.Identity.Name == "1")
                        {
                            <div class="row   text-left">

                <a asp-action="index" asp-controller="fuel_category" asp-route-station_id="@ViewBag.station_id">
                    <div class="children text-left text-uppercase">

                        <i class="fa fa-tachometer" aria-hidden="true"></i>&nbsp;&nbsp;MODIFY METER READINSY @User.Identity.Name
                    </div>

                </a>

                <div class="line"></div>

            </div>
            }
            }
            <div class="row   text-left">

                <a asp-action="Debtors" asp-route-station_id="@Context.Session.GetString("station_id")">
                    <div class="children text-left text-uppercase">

                        <i class="fa fa-money" aria-hidden="true"></i>&nbsp;&nbsp;DEBTORS
                    </div>

                </a>

                <div class="line"></div>

            </div><div class="row   text-left">

                <a asp-action="log_out" asp-controller="System_users">
                    <div class="children text-left text-uppercase">

                        <i class="fa fa-power-off" aria-hidden="true"></i>&nbsp;&nbsp;LOG OUT
                    </div>

                </a>

                <div class="line"></div>

            </div>




        </div>


    </div>
        }
                    <main role="main" class="pb-3">
                        @RenderBody()
                    </main> @*//PRINTER*@




                                </div>

    @*//SLIDER*@




























    <div class="modal fade" id="receipt_mod" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content w3-card">
                <form asp-action="set_printer" asp-controller="home">

                    <div class="modal-header  p-2  ">
                        <img src="~/images/settings.png" class="sell" />&nbsp;<b>Setings</b>
                    </div>

                    <div class="modal-header  p-2  ">
                        <img src="~/icons/printer.png" class="sell" />&nbsp;<b>Printer settings</b>
                    </div>

                    <div class="modal-body  p-2  text-center">

                        <table class="table">

                            <tr>
                                <td style="border:none">Current printer:</td>
                                <td style="border:none" class="text-danger"><b>@ViewBag.printer</b></td>
                            </tr>
                        </table>
                        <p>Please select prefered printer</p>

                        <div id="installedPrinters">

                            <select class="form-control" style="width:100%" name="installedPrinterName" id="installedPrinterName"></select><br /><br />
                            <button type="submit" class="btn btn-white w3-card ">Set as default printer</button>


                        </div>
                    </div>
                </form>
                <div class="modal-header  p-2  ">

                </div>
                <div class="modal-header  p-2  ">
                    <img src="~/icons/accounts_s.png" class="sell" />&nbsp;<b>Account settings &nbsp;<i class="fa fa-chevron-down" aria-hidden="true"></i></b>
                </div>
                <div class="modal-body  p-2  text-center">
                    <form asp-action="mod_account" asp-controller="home" id="modify_form">
                        <table class="table">
                            <tr>
                                <td style="border:none">Shop name:</td>
                                <td style="border:none" class="text-danger">
                                    @if (User.Identity.IsAuthenticated && User.Identity.Name == "1")
                                    {
                        <input value="@ViewBag.shop_name" placeholder="Enter shop name" name="shop_name" class="form-control" /> }
                    else
                    {
        <input value="@ViewBag.shop_name" placeholder="Enter shop name" name="shop_name" disabled class="form-control" />}
                                    <input value="@ViewBag.id" hidden name="id" />
                                </td>
                            </tr>
                            <tr>
                                <td style="border:none">Names:</td>
                                <td style="border:none" class="text-danger"><input value="@ViewBag.name" placeholder="Enter full names" name="f_names" class="form-control" /></td>
                            </tr>
                            <tr>
                                <td style="border:none">Phone:</td>
                                <td style="border:none" class="text-danger"><input value="@ViewBag.phone" placeholder="Enter phone" name="phone" class="form-control" /></td>
                            </tr>
                            <tr>
                                <td style="border:none">Enter new password:</td>
                                <td style="border:none" class="text-danger"><input placeholder="New password" maxlength="14" autocomplete="off" name="new_pass" type="password" class="form-control" /></td>
                            </tr>

                            <tr>
                                <td style="border:none" colspan="2" class="text-center">
                                    <button type="submit" class="btn btn-white w3-card ">Save dtails</button>
                                </td>

                            </tr>
                        </table>
                    </form>
                </div>
                <div class="modal-header  p-2  " hidden>

                    <input type="checkbox" id="useDefaultPrinter" class="form-control" /> <br /><strong>Print to Default printer</strong>


                </div>
                <div class="modal-body ">
                    <div class="row">
                        <div class="col-lg-12 text-center">

                            <button type="button" class="btn btn-white w3-card w-100" data-dismiss="modal">Exit</button>
                        </div>            <!-- Modal Header -->
                    </div>            <!-- Modal Header -->

                </div>

            </div>
        </div>
    </div>



    <!-- Button to Open the Modal -->
    <!-- The Modal -->
    <div class="modal" id="done" data-backdrop="static">
        <div class="modal-dialog">
            <div class="modal-content w3-card">

                <table class="table">
                    <tr>
                        <td rowspan="2">
                            <img src="/gif/done.gif" class="done" />
                        </td>
                        <td>
                            <p>Item sold successfully.Customer receipt has been downloaded to your local machine!.</p>
                            <a asp-action="refresh" asp-controller="home" class="btn w3-card">Ok</a>
                        </td>
                    </tr>
                </table>
                <div class="modal-header ">

                </div>
            </div>
        </div>
    </div>



    <div class="modal" id="upload">
        <div class="modal-dialog">
            <div class="modal-content w3-card">

                <!-- Modal Header -->
                <div class="modal-body text-center">
                    <p id="completed">Please wait for data upload to complete</p><br />
                    <img id="upload_img" src="/gif/loading1.gif" class="loading" /><br />
                    <img id="done_img" src="/gif/done.gif" class="done" /><br />

                    <p id="uploading_text">Uploading...</p><br />
                    <button id="close_mod" class="btn w3-card bg-white">Exit</button>
                </div>
            </div>
        </div>
    </div>



    <div class="modal" id="confirm_sale">
        <div class="modal-dialog modal-lg">
            <div class="modal-content w3-card">

                <!-- Modal Header -->
                <div class="modal-header ">



                    <table class="table table-sm border-0">
                        <tr>
                            <td colspan="2" class="border-0">
                                <p>Please confirm sales before submitting</p>

                            </td>
                        </tr>
                        <tr>
                            <td rowspan="2">
                                <img src="/gif/cofirm.gif" class="confirm_gif" />
                            </td>


                        </tr>
                        <tr>
                            <td>
                                <table>
                                    <tr>
                                        <td class="border-0">Item:</td>
                                        <td class="border-0"><p id="item_name_confirm"></p></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">To be sold:</td>
                                        <td class="border-0"><p id="item_sold_confirm"></p></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Buying Price:</td>
                                        <td class="border-0"><p id="cost_price_confirm"></p></td>
                                    </tr>
                                    <tr>
                                        <td class="border-0">Selling price:</td>
                                        <td class="border-0"><p id="price_confirm"></p></td>
                                    </tr>

                                    <tr>
                                        <td class="border-0">Sub-Total:</td>
                                        <td class="border-0"><p id="sub_total_confirm"></p></td>
                                    </tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td>Receipt printing:</td>
                            <td>
                                <div class="custom-control custom-switch mt-3">
                                    <input type="checkbox" class="custom-control-input" id="customSwitches" checked>
                                    <label class="custom-control-label" for="customSwitches" id="p_status">On</label>
                                </div>

                            </td>
                        </tr>
                        <tr>
                            <td class="border-0 text-left">
                                <button class="btn w3-card" id="finish_submit">Finish</button>
                            </td>

                            <td class="border-0 text-right">
                                <button class="btn w3-card" onclick="goBack()">Back</button>
                            </td>
                        </tr>
                    </table>

                </div>
            </div>



        </div>
    </div>
    @*//TO BE RESTOCKED ITEMS*@
    <div class="modal fade custome_modal_radius" id="to_restock_modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">

                <!-- Modal Header -->
                <div class="modal-header  p-2  ">
                    <img src="~/images/sell.png" class="sell" />&nbsp;<b>ITEMS TO BE RESTOCKED</b>

                </div>
                <div class="modal-body  p-2 w3-card">
                    <div class="row">
                        <div class="col-lg-12">
                            <div class="row">
                                <div class="col-lg-12">


                                    <div class="form-inline d-flex justify-content-center md-form form-sm active-pink active-pink-2 mt-2 ml-3 w-100">
                                        <i class="fa fa-search " aria-hidden="true" style="color:#68213A "></i>
                                        <input id="search_restock" class="form-control form-control-sm ml-3 search_input mb-2" type="text" placeholder="Search"
                                               aria-label="Search">
                                        &nbsp;
                                        @*<button class="btn btn-primary btn-sm w3-card" data-toggle="modal" data-target="#add_new_item_to_system"><i class="fa fa-plus" aria-hidden="true"></i> &nbsp; Add new item</button> &nbsp;*@
                                        <button class="btn btn-primary btn-sm" id="to_restock_pdf"><i class="fa fa-file-pdf-o" aria-hidden="true"></i>&nbsp;PDF</button>
                                        <button class="btn btn-white btn-sm w3-card" data-dismiss="modal"><i class="fa fa-times" aria-hidden="true"></i>&nbsp;Exit</button>

                                    </div>

                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row mt-4 p-2">
                        <table class="table font_flex" id="to_restock">
                            <tr>
                                <th class="border_none" style="border:none">Icon</th>
                                <th class="border_none" style="border:none">Item name</th>
                                <th class="border_none" style="border:none">Price</th>
                                <th class="border_none" style="border:none">Qunty</th>
                            </tr>
                            @if (@ViewBag.to_restock != null)
                            {
                @foreach (var item in ViewBag.to_restock)
                {
<tr>
    <td><img class="table_image_dynamic" /></td>
    <td>@item.Item_name</td>
    <td>@item.Item_price/=</td>
    @if (@item.Quantity == 0)
    {
<td><h5><span class="badge badge-danger">@item.Quantity</span></h5></td> }
                    else
                    {
<td><h5><span class="badge badge-secondary">@item.Quantity</span></h5></td>}

    @*<td class="border_none" style="border:none"><button class="btn btn-light" onclick="find_details('@item.id','@item.Item_name','@item.Item_price','@item.Quantity','@item.DateTime')"><i class="fa fa-ellipsis-v" aria-hidden="true"></i></button></td>*@

</tr>} }
            else
            {

<tr>
    <td colspan="4">
        <div class="alert alert-danger">
            <p>No item has been added yet</p>
        </div>
    </td>
</tr>}


                        </table>

                    </div>


                </div>


            </div>
        </div>
    </div>
    <div class="modal fade custome_modal_radius" id="sell_itemsf">
        <div class="modal-dialog modal-lg" style="z-index:1020">
            <div class="modal-content" style="z-index:1020">

                <!-- Modal Header -->
                <div class="modal-header  p-2  " style="z-index:1020">
                    <img src="~/fuel_icons/submitted.png" class="sell" />&nbsp;<b>RECENT SUBMITTED SALES</b>

                </div>




                @{  double totalcash = 0;}







                <!-- Modal body -->
                <div class="modal-body text-center">



                    <table class="table" style="z-index:1020">
                        <tr>
                            <td class="border-0">
                                <button class="btn btn-sm bg-white w3-card" id="todays_sales_pdf"><i class="fa fa-download" aria-hidden="true"></i>&nbsp;Download Pdf</button>
                                @*<input id="sell_item_customer" class="form-control form-control-sm search_input mb-2 w-100" type="text" placeholder="Search"
                                    aria-label="Search">*@
                            </td>

                        </tr>
                    </table>
                    Recent meter records
                    <table class="table font_flex" id="todays_individual_sales">
                        <tr>
                            @*<th class="border_none" style="border:none">Icon</th>*@
                            <th class="border_none" style="border:none">Date</th>
                            <th class="border_none" style="border:none">Dispenser</th>
                            <th class="border_none" style="border:none">Closing meter</th>
                            <th class="border_none" style="border:none">Previous meter</th>
                            <th class="border_none" style="border:none">Sold</th>
                            <th class="border_none" style="border:none">Price</th>
                            <th class="border_none" style="border:none">Submitted by</th>
                            <th class="border_none" style="border:none">Cash made</th>

                        </tr>
                        @if (@ViewBag.submitted_meter != null)
                        {

                           
                            @foreach (var item in ViewBag.submitted_meter)
                            {
                    <tr class="w3-card space_tr">
                        @*  <td class="border_none" style="border-top: none"><img class="table_image_dynamic" /></td>*@
                        <td class="border_none" style="border-top: none"><b>@item.Date</b></td>
                        <td class="border_none" style="border-top:none">@item.Label</td>
                        <td class="border_none" style="border-top:none">@item.Closing_meter</td>
                        <td class="border_none" style="border-top:none">@item.Previous_meter</td>
                        <td class="border_none litres" style="border-top:none">@item.Litres_sold</td>
                        <td class="border_none" style="border-top:none">@item.Price</td>
                        <td class="border_none" style="border-top:none">@item.Attendant</td>
                        <td class="border_none cash_made" style="border-top:none">@item.Cash_made</td>
                        @{totalcash += item.Cash_made;
                        }
                        @*  <td class="border_none" style="border:none"><button class="btn w3-card p-1"><img src="~/icons/tap.png" class="sell" /></button></td>*@

                    </tr>
} }
                        else
                        {

                    <tr>
                        <td colspan="4">
                            <div class="alert alert-danger">
                                <p>No item has been added yet</p>
                            </div>
                        </td>
                    </tr>
}
                        @if (ViewBag.cash_made == null)
                        {


                    <tr>
                        <td colspan="4"><strong class="font_total">Litres sold:</strong></td>
                        <td class="font_total"><strong id="total_litres_sold"></strong></td>
                        <td><strong class="font_total">Total Ksh.:</strong></td>
                        <td class="font_total"><strong id="total_cash_made_today"> @totalcash.ToString("#,##0.00")</strong></td>
                    </tr>
 }
                else
                {
                    <tr>
                       
                        <td class="font_total">
                            <strong>
                                @ViewBag.litres_sold
                            </strong>
                        </td>
                        <td colspan="4" class="font_total"><strong>Total cash made:</strong></td>
                        <td class="font_total"><strong>@ViewBag.cash_made</strong></td>

                    </tr>}
                    </table>




                </div>

            </div>
        </div>
    </div>


    <div class="modal data-backdrop=" static" fade custome_modal_radius" id="negative_results">
        <div class="modal-dialog">

            <div class="alert alert-danger alert-dismissible fade show " id="danger">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <p style="font-family:50px;"> <strong>Error!</strong>  @TempData["message"]</p>
            </div>
        </div>
    </div>
    <div class="modal data-backdrop=" static" fade custome_modal_radius" id="positive_results">
        <div class="modal-dialog">
            <div class="alert alert-success alert-dismissible fade show font_small" id="success">
                <button type="button" class="close" data-dismiss="alert">&times;</button>
                <p style="font-family:50px;"> <strong>Success!</strong>  @TempData["message"]</p>

            </div>
        </div>
    </div>








    @*//CHANGE PRICE*@



    @*//CHANGE PRICE SALES*@
    <div class="modal fade custome_modal_radius" id="change_price">
        <div class="modal-dialog modal-lg">
            <div class="modal-content ">
                <!-- Modal Header -->
                <div class="modal-header  p-2  " style="z-index:1020">
                    <img src="~/fuel_icons/FUEL.png" class="sell" />&nbsp;<b>SELECT FUEL</b>
                </div>
                <div class="modal-body  p-2 " style="z-index:1020">

                    <div class="row" id="selecting_fuel_price">
                        @if (ViewBag.fuel_category != null)
                        {
            @foreach (var item in ViewBag.fuel_category)
            {
<div class="col-12 col-lg-12" onclick="confirm_price('@item.id','@item.Price','@item.Fuel_names');">
    <div class="meter_readings_list">
        <div class="w3-card m-3 p-2">
            <table>
                <tr>
                    <td>
                        <img src="~/fuel_icons/drop.png" class="sell" />

                    </td>
                    <td class="pl-5 pr-3">
                        <p id="fuel_name_repeater">@item.Fuel_names</p>
                    </td>
                    <td class="pl-3" style="border-left:2px grey solid">
                        <b>Ksh. @item.Price &nbsp;/Litres</b>
                    </td>
                </tr>



            </table>
        </div>
    </div>
</div>}}
                    </div>
                    <div class="row" id="enter_new_price">
                        <div class="col-lg-12">
                            @*   <form asp-action="submit_meter_readings">*@
                            <input id="fuel_id" hidden>
                            <table class="" style="width:100%;">
                                <tr>
                                    <td colspan="2">
                                        Enter New Price<br />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="fuel_display ">
                                                <p id="fuel_id" hidden> </p>
                                                <p id="_fuel_name"> </p>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="group">
                                            <input class="form-control" type="number" min="0" name="mod_name" id="enter_price" placeholder="Enter new price here">
                                            <span class="highlight"></span>
                                            <span class="bar"></span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>

                                        <button id="back_to_choose_fuel_price" class="w3-card btn "><i class="fa fa-angle-double-left" aria-hidden="true"></i>Back</button>


                                    </td>
                                    <td class="text-center">
                                        <button id="confirm_price" class="w3-card btn ">Next&nbsp;<i class="fa fa-angle-double-right" aria-hidden="true"></i></button>
                                    </td>
                                </tr>
                            </table>
                            @*</form>*@
                        </div>
                    </div>
                    <div class="row " id="confirm_price_div">
                        <div class="col-lg-12 text-center">
                            <img src="~/fuel_icons/confirm.png" class="big_images" />
                            <table class="m-5">
                                <tr>
                                    <td colspan="2">
                                        <h2>CONFIRM</h2> <br />
                                        <p>Confirm meter readings entered.</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>New price:</td>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="fuel_display ">
                                                <h3>   <strong id="new_price"></strong> </h3>
                                            </div>
                                        </div>
                                    </td>

                                </tr>
                                <tr>
                                    <td>Old price:</td>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="old_price ">
                                                <h3>   <strong id="old_p"></strong> </h3>
                                            </div>
                                        </div>
                                    </td>

                                </tr>




                                <tr>
                                    <td>
                                        <button class="w3-card btn " id="edit_price"><i class="fa fa-angle-double-left" aria-hidden="true"></i>&nbsp;Modify</button>
                                    </td>
                                    <td class="text-center">
                                        <button class="w3-card btn " id="f_price">Submit&nbsp;<i class="fa fa-angle-double-right" aria-hidden="true"></i></button>
                                    </td>
                                </tr>



                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer text-center">
                    <button class="btn w3-card" data-dismiss="modal">Exit</button>

                </div>
            </div>
        </div>
    </div>















    @*//REFILL TANKS*@

    @*//CHANGE PRICE SALES*@
    <div class="modal fade custome_modal_radius" id="refill_modal">
        <div class="modal-dialog modal-lg">
            <div class="modal-content ">
                <!-- Modal Header -->
                <div class="modal-header  p-2  " style="z-index:1020">
                    <img src="~/fuel_icons/FUEL.png" class="sell" />&nbsp;<b>SELECT FUEL</b>
                </div>
                <div class="modal-body  p-2 " style="z-index:1020">

                    <div class="row" id="selecting_fule_refill">
                        @if (ViewBag.fuel_category != null)
                        {
            @foreach (var item in ViewBag.fuel_category)
            {
<div class="col-12 col-lg-12" onclick="select_fuel_refill('@item.id','@item.Current_quantity','@item.Tank_capacity','@item.Fuel_names');">
    <div class="meter_readings_list">
        <div class="w3-card m-3 p-2">
            <table>
                <tr>
                    <td>
                        <img src="~/fuel_icons/drop.png" class="sell" />

                    </td>
                    <td class="pl-5 pr-3">
                        <p id="fuel_name_repeater">@item.Fuel_names</p>
                    </td>
                    <td class="pl-3" style="border-left:2px grey solid">
                        <b> @item.Current_quantity &nbsp;Litres left</b>
                    </td>
                </tr>



            </table>
        </div>
    </div>
</div>}}
                    </div>
                    <div class="row" id="enter_quantity_refilled">
                        <div class="col-lg-12">
                            @*   <form asp-action="submit_meter_readings">*@
                            <input id="fuel_id" hidden>
                            <table class="" style="width:100%;">
                                <tr>
                                    <td colspan="2">
                                        Enter volume refilled in Litres<br />
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="fuel_display ">
                                                <p id="f_id_r" hidden> </p>
                                                <p id="c_quantity" hidden> </p>
                                                <p id="t_capacity" hidden> </p>
                                                <p id="_f_name"> </p>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td colspan="2">
                                        <div class="group">
                                            <input class="form-control" type="number" min="0" name="mod_name" id="enter_volume" placeholder="Enter volume refilled here">
                                            <span class="highlight"></span>
                                            <span class="bar"></span>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>

                                        <button id="back_to_choose_fuel_refill" class="w3-card btn "><i class="fa fa-angle-double-left" aria-hidden="true"></i>Back</button>


                                    </td>
                                    <td class="text-center">
                                        <button id="confirm_refill" class="w3-card btn ">Next&nbsp;<i class="fa fa-angle-double-right" aria-hidden="true"></i></button>
                                    </td>
                                </tr>
                            </table>
                            @*</form>*@
                        </div>
                    </div>
                    <div class="row " id="confirm_refill_div">
                        <div class="col-lg-12 text-center">
                            <img src="~/fuel_icons/confirm.png" class="big_images" />
                            <table class="m-5">
                                <tr>
                                    <td colspan="2">
                                        <h2>CONFIRM</h2> <br />
                                        <p>Confirm  values.</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Previous volume:</td>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="fuel_display ">
                                                <h3>   <strong id="p_volume"></strong> </h3>
                                            </div>
                                        </div>
                                    </td>

                                </tr>
                                <tr>
                                    <td>Volume 
                                        
                                        
                                        
                                        ed:</td>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="fuel_display">
                                                <h3>   <strong id="v_refilled"></strong> </h3>
                                            </div>
                                        </div>
                                    </td>

                                </tr>
                                <tr>
                                    <td>New volume:</td>
                                    <td colspan="2">
                                        <div class="col-12 col-lg-12">
                                            <div class="n_volume ">
                                                <h3>   <strong id="n_volume"></strong> </h3>
                                            </div>
                                        </div>
                                    </td>

                                </tr>




                                <tr>
                                    <td>
                                        <button class="w3-card btn " id="edit_refill"><i class="fa fa-angle-double-left" aria-hidden="true"></i>&nbsp;Modify</button>
                                    </td>
                                    <td class="text-center">
                                        <button class="w3-card btn " id="f_refill">Submit&nbsp;<i class="fa fa-angle-double-right" aria-hidden="true"></i></button>
                                    </td>
                                </tr>



                            </table>
                        </div>
                    </div>
                </div>
                <div class="modal-footer text-center">
                    <button class="btn w3-card" data-dismiss="modal">Exit</button>

                </div>
            </div>
        </div>
    </div>



    @*<footer class="border-top footer text-center text-muted bg-transparent">
            <div class="container">
                &copy; 2021 - SHOP - <a asp-area="" asp-controller="Home" asp-action="Privacy">Privacy</a>
            </div>
        </footer>*@
    @*<script type="module" src="~/Pos_printer/lib/zip.js"></script>
        <script src="~/Pos_printer/scripts/zip-ext.js"></script>
        <script src="~/Pos_printer/scripts/deflate.js"></script>
        <script src="~/Pos_printer/scripts/JSPrintManager.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>*@
    <script src="~/lib/jquery/dist/jquery.min.js"></script>
    <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/site.js" asp-append-version="true"></script>
    <script src="~/js/engine.js" asp-append-version="true"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.6/jspdf.plugin.autotable.min.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.3.3/firebase-auth.js"></script>
    <script src="~/js/core.js"></script>
    <script src="~/js/full-screen-helper.min.js"></script>
    <script src="~/js/side_menu.js"></script>
    <script src="~/js/site.js"></script>
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    @*<script src="~/js/tableHTMLExport.js" asp-append-version="true"></script>*@
    <script src="~/js/side_menu_functions.js" asp-append-version="true"></script>

    @RenderSection("Scripts", required: false)
    @RenderSection("increment", required: false)
    @RenderSection("debt", required: false)
    @RenderSection("debt1", required: false)
    @RenderSection("debt2", required: false)
    @RenderSection("exp", required: false)
    @RenderSection("dtbles", required: false)
    @RenderSection("x", required: false)

    <script type="text/javascript">
        function calc_total_litres() {
            var sum = 0;
            $(".litres").each(function () {
                sum += parsedouble($(this).text());
            });
            $('#total_litres_sold').text(sum);
        }

        function calc_total_cash_made() {
            var sum = 0;
            $(".cash_made").each(function () {
                sum += parsedouble($(this).text());
            });
            $('#total_cash_made_today').text(sum);
        }
        $(document).ready(function () {
            var msg = @((TempData["msg"] != null).ToString().ToLower());
            if (msg == true) {
                swal("@TempData["msg_header"]", "@TempData["msg"]", "@TempData["msg_type"]");

            }
            else {
                //swal("Warning", "Please enter meter reading before proceeding", "warning");
            }

            //TOTAL LITRES SOLD TODAY
            calc_total_litres();

            //TOTAL CASH MADE TODAY
            calc_total_cash_made();

    });


        //PDF RECENT SALES
        $("#todays_sales_pdf").click(function () {
            //$("#to_pf_table").tableHTMLExport({
            //    type: 'pdf',
            //    orientation: 'p'
            //});
            //var date = $("#serach_sales").val();
            //$("#sales_made_on").text(date);
            ////var img = new Image()
            var doc = new jsPDF();
            //img.src = 'wwwroot/images/logo2.png'
            //doc.addImage(img, 'png', 10, 78, 12, 15)
            var htmlstring = '';
            var tempVarToCheckPageHeight = 0;
            var pageHeight = 0;
            //pageHeight = doc.internal.pageSize.height;
            //specialElementHandlers = {
            //        // element with id of "bypass" - jQuery style selector
            //        '#bypassme': function(element, renderer) {
            //        // true = "handled elsewhere, bypass text extraction"
            //        return true
            //    }
            //};
            //margins = {
            //        top: 10,
            //    bottom: 10,
            //    left: 10,
            //    right: 10,
            //    width: 100
            //};
            var y = 20;
            doc.setLineWidth(2);
            //doc.text(200, y = y + 30, "TOTAL MARKS OF STUDENTS");
            doc.autoTable({
                html: '#todays_individual_sales',

            });
            doc.save('FUEL_SALES_TODAY_@DateTime.Now');

        });


        //PDF ALL SALES
        $("#download_all_pdf").click(function () {
            //$("#to_pf_table").tableHTMLExport({
            //    type: 'pdf',
            //    orientation: 'p'
            //});
            //var date = $("#serach_sales").val();
            //$("#sales_made_on").text(date);
            ////var img = new Image()
            var doc = new jsPDF();
            //img.src = 'wwwroot/images/logo2.png'
            //doc.addImage(img, 'png', 10, 78, 12, 15)
            var htmlstring = '';
            var tempVarToCheckPageHeight = 0;
            var pageHeight = 0;
            //pageHeight = doc.internal.pageSize.height;
            //specialElementHandlers = {
            //        // element with id of "bypass" - jQuery style selector
            //        '#bypassme': function(element, renderer) {
            //        // true = "handled elsewhere, bypass text extraction"
            //        return true
            //    }
            //};
            //margins = {
            //        top: 10,
            //    bottom: 10,
            //    left: 10,
            //    right: 10,
            //    width: 100
            //};
            var y = 20;
            doc.setLineWidth(2);
            //doc.text(200, y = y + 30, "TOTAL MARKS OF STUDENTS");
            doc.autoTable({
                html: '#example',

            });
            doc.save('ALL_SALES_@DateTime.Now');

        });

        function goBack() {
            window.history.back();
        }
    </script>
    <script src="~/js/slider.js" asp-append-version="true"></script>
</body>
</html>
